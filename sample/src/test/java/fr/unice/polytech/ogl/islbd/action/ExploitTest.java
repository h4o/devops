package fr.unice.polytech.ogl.islbd.action;

import junit.framework.TestCase;
import fr.unice.polytech.ogl.islbd.objective.BasicResource;

import org.junit.Ignore;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;

public class ExploitTest  extends TestCase{

	public ExploitTest(String method) {
		super(method);
	}
	
	/**
	 * Test the creation of an Exploit (toString should return a proper JSon string)
	 */
	@Test
	public void testExploitInitialization() {
		Exploit exploit = new Exploit(BasicResource.WOOD);
		String expected = "{\"action\":\"exploit\",\"parameters\":{\"resource\":\"WOOD\"}}";
		assertEquals(expected, exploit.toString());
	}

	/**
	 * Test of getResource with a resource name.
	 */
	@Test
	public void testGetResource() {
		Exploit exploit = new Exploit(BasicResource.FUR);
		BasicResource expected = BasicResource.FUR;
		
		assertEquals(expected, exploit.getResource());
	}
	
	/**
	 * Test of getResource with null.
	 */
	@Test
	public void testGetResourceNull() {
		Exploit exploit = new Exploit(null);
		assertNull(exploit.getResource());
	}
	
	/**
	 * Test of getAmount
	 */
	@Test
	public void testGetAmount() {
		Exploit exploit = new Exploit(BasicResource.WOOD);
		exploit.setConsequence(new Consequence("{\"cost\":6,\"extras\":{\"amount\": 24},\"status\": \"OK\"}"));
		
		int expected = 24;
		
		assertEquals(expected, exploit.getAmount());
	}

}
